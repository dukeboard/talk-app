{"version":3,"sources":["fake","../c:/Alex/src/vscode/out-build/vs/nls.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"vs/nls.js","sourcesContent":["/*!-----------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.6.1(8f43cf5d0d3d233c9ba1c9085f2bb529f834c841)\n * Released under the MIT license\n * https://github.com/Microsoft/vscode/blob/master/LICENSE.txt\n *-----------------------------------------------------------*/\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/*---------------------------------------------------------------------------------------------\n *---------------------------------------------------------------------------------------------\n *---------------------------------------------------------------------------------------------\n *---------------------------------------------------------------------------------------------\n *---------------------------------------------------------------------------------------------\n * Please make sure to make edits in the .ts file at https://github.com/Microsoft/vscode-loader/\n *---------------------------------------------------------------------------------------------\n *---------------------------------------------------------------------------------------------\n *---------------------------------------------------------------------------------------------\n *---------------------------------------------------------------------------------------------\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar _nlsPluginGlobal = this;\nvar NLSLoaderPlugin;\n(function (NLSLoaderPlugin) {\n    var global = _nlsPluginGlobal;\n    var Resources = global.Plugin && global.Plugin.Resources ? global.Plugin.Resources : undefined;\n    var DEFAULT_TAG = 'i-default';\n    var IS_PSEUDO = (global && global.document && global.document.location && global.document.location.hash.indexOf('pseudo=true') >= 0);\n    var slice = Array.prototype.slice;\n    function _format(message, args) {\n        var result;\n        if (args.length === 0) {\n            result = message;\n        }\n        else {\n            result = message.replace(/\\{(\\d+)\\}/g, function (match, rest) {\n                var index = rest[0];\n                return typeof args[index] !== 'undefined' ? args[index] : match;\n            });\n        }\n        if (IS_PSEUDO) {\n            // FF3B and FF3D is the Unicode zenkaku representation for [ and ]\n            result = '\\uFF3B' + result.replace(/[aouei]/g, '$&$&') + '\\uFF3D';\n        }\n        return result;\n    }\n    function findLanguageForModule(config, name) {\n        var result = config[name];\n        if (result)\n            return result;\n        result = config['*'];\n        if (result)\n            return result;\n        return null;\n    }\n    function localize(data, message) {\n        var args = [];\n        for (var _i = 0; _i < (arguments.length - 2); _i++) {\n            args[_i] = arguments[_i + 2];\n        }\n        return _format(message, args);\n    }\n    function createScopedLocalize(scope) {\n        return function (idx, defaultValue) {\n            var restArgs = slice.call(arguments, 2);\n            return _format(scope[idx], restArgs);\n        };\n    }\n    var NLSPlugin = (function () {\n        function NLSPlugin() {\n            this.localize = localize;\n        }\n        NLSPlugin.prototype.setPseudoTranslation = function (value) {\n            IS_PSEUDO = value;\n        };\n        NLSPlugin.prototype.create = function (key, data) {\n            return {\n                localize: createScopedLocalize(data[key])\n            };\n        };\n        NLSPlugin.prototype.load = function (name, req, load, config) {\n            config = config || {};\n            if (!name || name.length === 0) {\n                load({\n                    localize: localize\n                });\n            }\n            else {\n                var suffix = void 0;\n                if (Resources && Resources.getString) {\n                    suffix = '.nls.keys';\n                    req([name + suffix], function (keyMap) {\n                        load({\n                            localize: function (moduleKey, index) {\n                                if (!keyMap[moduleKey])\n                                    return 'NLS error: unknown key ' + moduleKey;\n                                var mk = keyMap[moduleKey].keys;\n                                if (index >= mk.length)\n                                    return 'NLS error unknow index ' + index;\n                                var subKey = mk[index];\n                                var args = [];\n                                args[0] = moduleKey + '_' + subKey;\n                                for (var _i = 0; _i < (arguments.length - 2); _i++) {\n                                    args[_i + 1] = arguments[_i + 2];\n                                }\n                                return Resources.getString.apply(Resources, args);\n                            }\n                        });\n                    });\n                }\n                else {\n                    if (config.isBuild) {\n                        req([name + '.nls', name + '.nls.keys'], function (messages, keys) {\n                            NLSPlugin.BUILD_MAP[name] = messages;\n                            NLSPlugin.BUILD_MAP_KEYS[name] = keys;\n                            load(messages);\n                        });\n                    }\n                    else {\n                        var pluginConfig = config['vs/nls'] || {};\n                        var language = pluginConfig.availableLanguages ? findLanguageForModule(pluginConfig.availableLanguages, name) : null;\n                        suffix = '.nls';\n                        if (language !== null && language !== DEFAULT_TAG) {\n                            suffix = suffix + '.' + language;\n                        }\n                        req([name + suffix], function (messages) {\n                            if (Array.isArray(messages)) {\n                                messages.localize = createScopedLocalize(messages);\n                            }\n                            else {\n                                messages.localize = createScopedLocalize(messages[name]);\n                            }\n                            load(messages);\n                        });\n                    }\n                }\n            }\n        };\n        NLSPlugin.prototype._getEntryPointsMap = function () {\n            global.nlsPluginEntryPoints = global.nlsPluginEntryPoints || {};\n            return global.nlsPluginEntryPoints;\n        };\n        NLSPlugin.prototype.write = function (pluginName, moduleName, write) {\n            // getEntryPoint is a Monaco extension to r.js\n            var entryPoint = write.getEntryPoint();\n            // r.js destroys the context of this plugin between calling 'write' and 'writeFile'\n            // so the only option at this point is to leak the data to a global\n            var entryPointsMap = this._getEntryPointsMap();\n            entryPointsMap[entryPoint] = entryPointsMap[entryPoint] || [];\n            entryPointsMap[entryPoint].push(moduleName);\n            if (moduleName !== entryPoint) {\n                write.asModule(pluginName + '!' + moduleName, 'define([\\'vs/nls\\', \\'vs/nls!' + entryPoint + '\\'], function(nls, data) { return nls.create(\"' + moduleName + '\", data); });');\n            }\n        };\n        NLSPlugin.prototype.writeFile = function (pluginName, moduleName, req, write, config) {\n            var entryPointsMap = this._getEntryPointsMap();\n            if (entryPointsMap.hasOwnProperty(moduleName)) {\n                var fileName = req.toUrl(moduleName + '.nls.js');\n                var contents = [\n                    '/*---------------------------------------------------------',\n                    ' * Copyright (c) Microsoft Corporation. All rights reserved.',\n                    ' *--------------------------------------------------------*/'\n                ], entries = entryPointsMap[moduleName];\n                var data = {};\n                for (var i = 0; i < entries.length; i++) {\n                    data[entries[i]] = NLSPlugin.BUILD_MAP[entries[i]];\n                }\n                contents.push('define(\"' + moduleName + '.nls\", ' + JSON.stringify(data, null, '\\t') + ');');\n                write(fileName, contents.join('\\r\\n'));\n            }\n        };\n        NLSPlugin.prototype.finishBuild = function (write) {\n            write('nls.metadata.json', JSON.stringify({\n                keys: NLSPlugin.BUILD_MAP_KEYS,\n                messages: NLSPlugin.BUILD_MAP,\n                bundles: this._getEntryPointsMap()\n            }, null, '\\t'));\n        };\n        ;\n        NLSPlugin.BUILD_MAP = {};\n        NLSPlugin.BUILD_MAP_KEYS = {};\n        return NLSPlugin;\n    }());\n    NLSLoaderPlugin.NLSPlugin = NLSPlugin;\n    (function () {\n        define('vs/nls', new NLSPlugin());\n    })();\n})(NLSLoaderPlugin || (NLSLoaderPlugin = {}));\n"]}